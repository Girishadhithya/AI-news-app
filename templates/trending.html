{% extends "base.html" %}
{% block title %}The Colorful Times - Trending{% endblock %}
{% block content %}
<h2 class="text-3xl font-bold text-blue-800 mb-6">Trending News</h2>
<div id="articles" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {# Check if articles exist and iterate over them #}
    {% if articles %}
        {% for article in articles %}
            {# Define a list of colors to cycle through for article card backgrounds #}
            {# CORRECTED: Changed 'do' to 'set' for variable assignment #}
            {% set colors = ['bg-blue-200', 'bg-pink-200', 'bg-green-200'] %}
            {# Apply a background color from the 'colors' list based on the article's index #}
            <div class="article-card p-6 rounded-lg shadow-lg {{ colors[loop.index0 % 3] }}">
                {# Display the article thumbnail if it exists #}
                {% if article.fields.thumbnail %}
                    <img src="{{ article.fields.thumbnail }}" alt="Article thumbnail" class="w-full h-48 object-cover rounded mb-4">
                {% endif %}
                {# Display the article headline #}
                <h3 class="text-xl font-semibold text-blue-600">{{ article.fields.headline }}</h3>
                {# Display a short summary or 'trailText' of the article #}
                <p class="text-gray-600">{{ article.fields.trailText }}</p>
                {# Create a "Read More" link that points to your internal article page. #}
                {# 'url_for' is a Jinja2 function that generates a URL for a Flask route. #}
                {# 'article' is the name of the Flask function (from app.py) that handles single article display. #}
                {# 'article_id=article.id' passes the Guardian article ID as a parameter to the Flask route. #}
                <a href="{{ url_for('article', article_id=article.id) }}" class="btn inline-block mt-4 bg-orange-400 text-white px-4 py-2 rounded btn-orange">Read More</a>
            </div>
        {% endfor %}
    {% else %}
        {# If no articles are available, display a message #}
        <p id="no-articles" class="text-gray-600">No articles available at the moment.</p>
    {% endif %}
</div>
{% endblock %}
