{% extends "base.html" %}
{% block title %}The Colorful Times - Search{% endblock %}
{% block content %}
<h2 class="text-3xl font-bold text-blue-800 mb-6">Search Results{% if query %}: "{{ query }}"{% endif %}</h2>

{# Ensure your search form is present and submits to the /search route #}
<form action="{{ url_for('search') }}" method="GET" class="mb-6 flex">
    <input type="text" name="q" value="{{ query if query }}" placeholder="Search news..."
           class="flex-grow p-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
    <button type="submit" class="bg-blue-500 text-white px-6 py-3 rounded-r-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500">Search</button>
</form>

<div id="articles" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% if articles %}
        {% for article in articles %}
            {# Define a list of colors to cycle through for article card backgrounds #}
            {% set colors = ['bg-blue-100', 'bg-pink-100', 'bg-green-100'] %} {# Lighter colors for search results #}
            <div class="article-card p-6 rounded-lg shadow-lg {{ colors[loop.index0 % 3] }}">
                {# Display the article thumbnail if it exists #}
                {% if article.fields.thumbnail %}
                    <img src="{{ article.fields.thumbnail }}" alt="Article thumbnail" class="w-full h-48 object-cover rounded mb-4">
                {% endif %}
                {# Display the article headline (consistent with other pages) #}
                <h3 class="text-xl font-semibold text-blue-600">{{ article.fields.headline }}</h3>
                {# Display a short summary or 'trailText' of the article #}
                <p class="text-gray-600">{{ article.fields.trailText }}</p>
                {# Link to your internal article route using url_for #}
                {# This keeps the user on your website when they click "Read More" #}
                <a href="{{ url_for('article', article_id=article.id) }}" class="btn inline-block mt-4 bg-orange-400 text-white px-4 py-2 rounded btn-orange">Read More</a>
            </div>
        {% endfor %}
    {% else %}
        {% if query %}
            <p id="no-articles" class="text-gray-600">No articles found for "{{ query }}".</p>
        {% else %}
            <p id="no-articles" class="text-gray-600">Enter a search term to find news articles.</p>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
